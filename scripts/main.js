!function e(t,n,r){function a(o,u){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return a(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function i(e,t){r(this,i),this.trebleNotes=e,this.bassNotes=t};n["default"]=a},{}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=e("./view-model"),i=r(a);$(function(){var e=new i["default"];ko.applyBindings(e)})},{"./view-model":6}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){e+=42;var t=u[(e+2)%u.length],n=~~(e/u.length)-2;return t+"/"+n}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=Vex.Flow,u=["a","b","c","d","e","f","g"],s=function(){function e(t,n){r(this,e),this.notes=[t],this.duration=n}return i(e,[{key:"toFlowNote",value:function(e){return new o.StaveNote({keys:this.notes.map(function(e){return a(e)}),duration:""+this.duration,clef:e,stem_direction:"treble"===e?1:-1})}}]),e}();n["default"]=s},{}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t,n,r=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t=1,n=regeneratorRuntime.mark(function i(){var n,a,o,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=Math.random()*t,a=0,o=e.findIndex(function(e){return a+=e.weight,a>n-.001}),u=e.splice(o,1)[0],t-=u.weight,r.next=7,u.value;case 7:case"end":return r.stop()}},i,r)});case 2:if(!(e.length>0)){a.next=6;break}return a.delegateYield(n(),"t0",4);case 4:a.next=2;break;case 6:case"end":return a.stop()}},v[0],this)}function o(e,t,n){var r=n.totalDuration;if(t===r)return e;var a=r-t,u=i(n.durations),s=!0,c=!1,f=void 0;try{for(var l,d=u[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var h=l.value,v=1/h;if(v<=a){var w=o(e.concat(h),t+v,n);if(w)return w}}}catch(b){c=!0,f=b}finally{try{!s&&d["return"]&&d["return"]()}finally{if(c)throw f}}return null}function u(e,t){var n=t.noteRange,r=n[1]-n[0]+1;return e.map(function(e){var t=~~Math.min(Math.random()*r,r-1)+n[0];return new h["default"](t,e)})}function s(e){var t=e[1]-e[0]+1;return~~(Math.random()*t)+e[0]}function c(e){return u(o([],0,e),e)}function f(e){var t=s(e.lNoteRange),n=[Math.max(e.rNoteRange[0],t+5),e.rNoteRange[1]],r=s(n);return[t,r]}Object.defineProperty(n,"__esModule",{value:!0}),n.HandsOptions=n.BarOptions=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n.bar=c,n.hands=f;var d=e("./note"),h=r(d),v=[i].map(regeneratorRuntime.mark);n.BarOptions=function(){function e(t,n,r,i){a(this,e),this.numBeats=t,this.beatValue=n,this._durations=i,this.noteRange=r}return l(e,[{key:"totalDuration",get:function(){return this.numBeats/this.beatValue}},{key:"durations",get:function(){return this._durations.slice()}}]),e}(),n.HandsOptions=function w(e,t,n){a(this,w),this.lNoteRange=e,this.rNoteRange=t}},{"./note":3}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){a=!0,i=s}finally{try{!r&&u["return"]&&u["return"]()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=Vex.Flow,u=function(){function e(t){r(this,e),this.width=t.width(),this.renderer=new o.Renderer(t.get(0),o.Renderer.Backends.SVG),this.context=this.renderer.getContext(),this.context.setFont("Arial",10,"").setBackgroundFillStyle("#eed")}return i(e,[{key:"draw",value:function(e,t){var n=this,r=0,a=0,i=220,o=200,u=60,s=~~((this.width-u)/i),c=t*s,f=Array(c).fill().map(function(t){return e()});this.renderer.getContext().clear(),this.renderer.resize(this.width,o*t),f.forEach(function(e,t){var c=t%s===0;c&&0!==t&&(r=0,a+=o);var f={bar:e,x:r,y:a,width:i+(c?u:0),firstInRow:c};n._drawBar(f),r+=f.width})}},{key:"_drawBar",value:function(e){var t=this,n=this._createStave(e,"treble",e.bar.trebleNotes),r=a(n,3),i=r[0],u=r[1],s=r[2],c=this._createStave(e,"bass",e.bar.bassNotes),f=a(c,3),l=f[0],d=f[1],h=f[2],v=[u,d];(new o.Formatter).format(v,200);u.draw(this.context,i),d.draw(this.context,l),s.concat(h).forEach(function(e){return e.setContext(t.context).draw()})}},{key:"_createStave",value:function(e,t,n){var r=n.map(function(e){return e.toFlowNote(t)}),a=e.y+("bass"===t?80:0),i=new o.Stave(e.x,a,e.width);e.firstInRow&&i.addClef(t).addTimeSignature("4/4"),i.setContext(this.context).draw();var u=new o.Voice({num_beats:4,beat_value:4});u.addTickables(r);var s=o.Beam.generateBeams(r);return[i,u,s]}}]),e}();n["default"]=u},{}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("./randomise"),s=a(u),c=e("./renderer"),f=r(c),l=e("./bar"),d=r(l),h=function(){function e(){i(this,e),this.renderer=new f["default"]($("#music-canvas")),this.newHandPositions()}return o(e,[{key:"refresh",value:function(){var e=[this._handPositions[1],this._handPositions[1]+4],t=new s.BarOptions(4,4,e,[{value:1,weight:.15},{value:2,weight:.2},{value:4,weight:.6},{value:8,weight:.05}]),n=[this._handPositions[0],this._handPositions[0]+4],r=new s.BarOptions(4,4,n,[{value:1,weight:.25},{value:2,weight:.75}]),a=function(e){return new d["default"](s.bar(t),s.bar(r))};this.renderer.draw(a,3)}},{key:"newHandPositions",value:function(){var e=new s.HandsOptions([-12,-3],[1,8]);this._handPositions=s.hands(e),this.refresh()}}]),e}();n["default"]=h},{"./bar":1,"./randomise":4,"./renderer":5}]},{},[2]);